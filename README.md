# MMM Memos - Tauri å®¢æˆ·ç«¯

ä¸€ä¸ªåŸºäº Tauri 2.0 çš„ Memos æ¡Œé¢å®¢æˆ·ç«¯ï¼Œæ”¯æŒ iOS å’Œæ¡Œé¢å¹³å°ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ åŸºäº Tauri 2.0 æ„å»º
- ğŸ“± æ”¯æŒ iOS å’Œæ¡Œé¢å¹³å°
- ğŸ¨ ç°ä»£åŒ–çš„ UI è®¾è®¡ï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼
- ğŸ” å®‰å…¨çš„è®¤è¯ç³»ç»Ÿ
- ğŸ“ ç¬”è®°ç¼–è¾‘å’Œç®¡ç†
- ğŸ” æœç´¢åŠŸèƒ½
- ğŸ·ï¸ æ ‡ç­¾å’Œåˆ†ç±»
- ğŸ›£ï¸ Vue Router è·¯ç”±ç®¡ç†
- ğŸ—ƒï¸ Pinia çŠ¶æ€ç®¡ç†

## æŠ€æœ¯æ ˆ

- **åç«¯**: Tauri 2.0 (Rust)
- **å‰ç«¯**: Vue 3 + TypeScript + Vite
- **è·¯ç”±**: Vue Router 4
- **çŠ¶æ€ç®¡ç†**: Pinia
- **æ ·å¼**: Tailwind CSS
- **åŒ…ç®¡ç†**: pnpm

## å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚

- Node.js 18+
- pnpm
- Rust (ç”¨äº Tauri)
- Xcode (ç”¨äº iOS æ„å»º)

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
pnpm dev

# å¯åŠ¨ Tauri å¼€å‘æ¨¡å¼
pnpm tauri dev
```

### æ„å»º

```bash
# æ„å»ºå‰ç«¯
pnpm build

# æ„å»ºæ‰€æœ‰å¹³å°
pnpm tauri build

# æ„å»º iOS
pnpm tauri build --target aarch64-apple-ios
```

## åº”ç”¨æ¶æ„

### è·¯ç”±ç»“æ„

åº”ç”¨é‡‡ç”¨ Vue Router è¿›è¡Œé¡µé¢è·¯ç”±ç®¡ç†ï¼š

- **`/`** - ç™»å½•é¡µé¢ (`LoginView.vue`)
- **`/dashboard`** - ä»ªè¡¨æ¿ (`DashboardView.vue`)
- **`/memos`** - ç¬”è®°åˆ—è¡¨ (`MemosView.vue`)
- **`/settings`** - è®¾ç½®é¡µé¢ (`SettingsView.vue`)
- **`/404`** - 404é”™è¯¯é¡µé¢ (`NotFoundView.vue`)

### çŠ¶æ€ç®¡ç† (Pinia)

åº”ç”¨ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¸»è¦çš„ store åŒ…æ‹¬ï¼š

#### è®¤è¯ Store (`useAuthStore`)

```typescript
// çŠ¶æ€
authState: AuthState          // è®¤è¯çŠ¶æ€å¯¹è±¡
isLoading: boolean           // åŠ è½½çŠ¶æ€

// è®¡ç®—å±æ€§
isAuthenticated: boolean     // æ˜¯å¦å·²è®¤è¯
user: User                   // ç”¨æˆ·ä¿¡æ¯
serverUrl: string           // æœåŠ¡å™¨åœ°å€
accessToken: string         // è®¿é—®ä»¤ç‰Œ

// åŠ¨ä½œ
login(data: LoginData)      // ç™»å½•
logout()                    // ç™»å‡º
checkAuth()                 // æ£€æŸ¥è®¤è¯çŠ¶æ€
updateUser(userData)        // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```

### è·¯ç”±å®ˆå«

- **è®¤è¯æ£€æŸ¥**: è‡ªåŠ¨æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼ˆä» Pinia storeï¼‰
- **é¡µé¢æ ‡é¢˜**: åŠ¨æ€è®¾ç½®é¡µé¢æ ‡é¢˜
- **é‡å®šå‘**: æœªç™»å½•ç”¨æˆ·è‡ªåŠ¨é‡å®šå‘åˆ°ç™»å½•é¡µ
- **çŠ¶æ€æ¢å¤**: è‡ªåŠ¨ä» localStorage æ¢å¤è®¤è¯çŠ¶æ€

### ç™»å½•æµç¨‹

1. **ç™»å½•é¡µé¢** (`/`)ï¼šç”¨æˆ·è¾“å…¥æœåŠ¡å™¨åœ°å€å’Œè®¿é—®ä»¤ç‰Œ
2. **è®¤è¯éªŒè¯**ï¼šè°ƒç”¨ Memos API éªŒè¯ä»¤ç‰Œ
3. **çŠ¶æ€ä¿å­˜**ï¼šè®¤è¯ä¿¡æ¯å­˜å‚¨åˆ° Pinia store å’Œ localStorage
4. **é¡µé¢è·³è½¬**ï¼šè‡ªåŠ¨è·³è½¬åˆ°ä»ªè¡¨æ¿é¡µé¢

### æ•°æ®æŒä¹…åŒ–

- **Pinia Store**: å†…å­˜ä¸­çš„å“åº”å¼çŠ¶æ€ç®¡ç†
- **localStorage**: æŒä¹…åŒ–å­˜å‚¨è®¤è¯ä¿¡æ¯
- **è‡ªåŠ¨åŒæ­¥**: Store ä¸ localStorage åŒå‘åŒæ­¥

## ç™»å½•ç•Œé¢

åº”ç”¨åŒ…å«ä¸€ä¸ªç®€çº¦çš„ç™»å½•ç•Œé¢ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š

### ç•Œé¢å…ƒç´ 

1. **æœåŠ¡å™¨åœ°å€è¾“å…¥æ¡†**
   - ç±»å‹ï¼šURL è¾“å…¥
   - å ä½ç¬¦ï¼š`https://your-memos-server.com`
   - éªŒè¯ï¼šURL æ ¼å¼éªŒè¯

2. **è®¿é—®ä»¤ç‰Œè¾“å…¥æ¡†**
   - ç±»å‹ï¼šå¯†ç è¾“å…¥
   - å ä½ç¬¦ï¼š`è¯·è¾“å…¥æ‚¨çš„è®¿é—®ä»¤ç‰Œ`
   - éªŒè¯ï¼šéç©ºéªŒè¯

3. **ç™»å½•æŒ‰é’®**
   - çŠ¶æ€ï¼šåŠ è½½ä¸­/æ­£å¸¸
   - åŠŸèƒ½ï¼šæäº¤ç™»å½•ä¿¡æ¯

### åŠŸèƒ½ç‰¹æ€§

- âœ… å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- âœ… æ·±è‰²æ¨¡å¼æ”¯æŒ
- âœ… è¡¨å•éªŒè¯
- âœ… åŠ è½½çŠ¶æ€æ˜¾ç¤º
- âœ… é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ
- âœ… ç±»å‹å®‰å…¨çš„ TypeScript å®ç°
- âœ… è·¯ç”±å¯¼èˆªå’ŒçŠ¶æ€æŒä¹…åŒ–
- âœ… Pinia çŠ¶æ€ç®¡ç†é›†æˆ

### ä½¿ç”¨è¯´æ˜

1. åœ¨æœåŠ¡å™¨åœ°å€è¾“å…¥æ¡†ä¸­è¾“å…¥æ‚¨çš„ Memos æœåŠ¡å™¨åœ°å€
2. åœ¨è®¿é—®ä»¤ç‰Œè¾“å…¥æ¡†ä¸­è¾“å…¥æ‚¨çš„è®¿é—®ä»¤ç‰Œ
3. ç‚¹å‡»ç™»å½•æŒ‰é’®è¿›è¡Œè®¤è¯
4. ç³»ç»Ÿä¼šè‡ªåŠ¨éªŒè¯æœåŠ¡å™¨è¿æ¥å’Œä»¤ç‰Œæœ‰æ•ˆæ€§
5. ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°ä»ªè¡¨æ¿é¡µé¢

### è·å–è®¿é—®ä»¤ç‰Œ

è®¿é—®ä»¤ç‰Œå¯ä»¥åœ¨æ‚¨çš„ Memos æœåŠ¡å™¨è®¾ç½®ä¸­æ‰¾åˆ°ï¼š

1. ç™»å½•åˆ°æ‚¨çš„ Memos æœåŠ¡å™¨
2. è¿›å…¥è®¾ç½®é¡µé¢
3. åœ¨ API æˆ–å¼€å‘è€…é€‰é¡¹ä¸­æ‰¾åˆ°è®¿é—®ä»¤ç‰Œ
4. å¤åˆ¶ä»¤ç‰Œå¹¶åœ¨å®¢æˆ·ç«¯ä¸­ä½¿ç”¨

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/          # Vue ç»„ä»¶
â”‚   â””â”€â”€ LoginForm.vue   # ç™»å½•è¡¨å•ç»„ä»¶
â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ index.ts        # è·¯ç”±å®šä¹‰å’Œå®ˆå«
â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â””â”€â”€ auth.ts         # è®¤è¯æœåŠ¡
â”œâ”€â”€ stores/             # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ index.ts        # Store å…¥å£
â”‚   â””â”€â”€ auth.ts         # è®¤è¯çŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/              # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ auth.ts         # è®¤è¯ç›¸å…³ç±»å‹
â”œâ”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ LoginView.vue   # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ DashboardView.vue # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”œâ”€â”€ MemosView.vue   # ç¬”è®°é¡µé¢
â”‚   â”œâ”€â”€ SettingsView.vue # è®¾ç½®é¡µé¢
â”‚   â””â”€â”€ NotFoundView.vue # 404é¡µé¢
â”œâ”€â”€ assets/             # é™æ€èµ„æº
â”œâ”€â”€ main.ts             # åº”ç”¨å…¥å£
â””â”€â”€ App.vue             # æ ¹ç»„ä»¶
```

## é¡µé¢è¯´æ˜

### 1. ç™»å½•é¡µé¢ (`/`)
- ç”¨æˆ·è®¤è¯å…¥å£
- æœåŠ¡å™¨è¿æ¥æµ‹è¯•
- çŠ¶æ€æŒä¹…åŒ–
- Pinia store é›†æˆ

### 2. ä»ªè¡¨æ¿ (`/dashboard`)
- ç”¨æˆ·æ¬¢è¿ç•Œé¢
- å¿«é€Ÿå¯¼èˆª
- ç”¨æˆ·ä¿¡æ¯å±•ç¤º
- é€€å‡ºç™»å½•åŠŸèƒ½

### 3. ç¬”è®°é¡µé¢ (`/memos`)
- ç¬”è®°åˆ—è¡¨å±•ç¤º
- åˆ›å»ºå’Œç¼–è¾‘åŠŸèƒ½ï¼ˆå¼€å‘ä¸­ï¼‰
- æœç´¢å’Œè¿‡æ»¤ï¼ˆå¼€å‘ä¸­ï¼‰

### 4. è®¾ç½®é¡µé¢ (`/settings`)
- ä¸»é¢˜è®¾ç½®
- ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
- æœåŠ¡å™¨ä¿¡æ¯æ˜¾ç¤º
- åº”ç”¨é…ç½®

### 5. 404é¡µé¢
- å‹å¥½çš„é”™è¯¯æç¤º
- å¯¼èˆªè¿”å›é€‰é¡¹

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/views/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ Vue ç»„ä»¶
2. åœ¨ `src/router/index.ts` ä¸­æ·»åŠ è·¯ç”±é…ç½®
3. è®¾ç½®é€‚å½“çš„è·¯ç”±å®ˆå«å’Œå…ƒä¿¡æ¯

### çŠ¶æ€ç®¡ç†

- ä½¿ç”¨ Pinia è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†
- Store é‡‡ç”¨ Composition API é£æ ¼
- å“åº”å¼çŠ¶æ€ä¸ localStorage åŒå‘åŒæ­¥
- ç±»å‹å®‰å…¨çš„ TypeScript æ”¯æŒ

#### åˆ›å»ºæ–°çš„ Store

```typescript
// src/stores/example.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useExampleStore = defineStore('example', () => {
  // çŠ¶æ€
  const state = ref()
  
  // è®¡ç®—å±æ€§
  const computed = computed(() => state.value)
  
  // åŠ¨ä½œ
  const action = () => {
    // é€»è¾‘å¤„ç†
  }
  
  return {
    state,
    computed,
    action
  }
})
```

### æ ·å¼æŒ‡å—

- ä½¿ç”¨ Tailwind CSS å·¥å…·ç±»
- æ”¯æŒæ·±è‰²æ¨¡å¼
- éµå¾ªç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡
- ç¡®ä¿è‰¯å¥½çš„å¯è®¿é—®æ€§

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼